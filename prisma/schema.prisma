// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  // output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Character {
  id          Int      @id @default(autoincrement())
  name        String
  title       String
  universe    String
  image       String
  description String
  stats       Json              // { hp, attack, defense, speed }
  movePool    Json              // [{ name, type, power, description }]
  abilities   Json              // { special, hidden }
  theme       Json              // { primaryColor, secondaryColor, borderColor, glowColor }
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Move {
  id                 String    @id @default(cuid())
  name               String

  // Classification
  categories         String[]  // e.g., ["target", "domain", "protection", "exception"]
  roles              String[]  // e.g., ["damage", "support"]
  effects            String[]  // e.g., ["buff", "debuff"]
  affectedStats      Json       // e.g., [{ "stat": "attack", "amount": -40 }, { "stat": "speed", "amount": -20 }]

  // Battle mechanics
  power              Int       // 0–100
  accuracy           Int       // 0–100
  targetTypes        String[]  // e.g., ["single", "double", "all", "self"]
  duration           Int       // Duration in turns
  moveType           String    // "physical" | "special"
  contact            Boolean   // true = contact move

  // Special case handling
  exceptionHandler   String?   // (Optional) Store function name or serialized logic

  // Multimedia
  moveSound          String?   // Path or file reference
  animation          String?   // Animation reference

  // Metadata
  relatedCharacters  String[]  // Array of character IDs
  description        String?   // Tooltip/lore text

  createdAt          DateTime  @default(now())
  updatedAt          DateTime  @updatedAt
}




